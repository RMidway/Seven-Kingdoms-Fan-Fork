###########################################
#
# Society decisions for secret religious societies
#
###########################################

society_decisions = {
	
	secret_religions_openly_adopt_faith = {
		is_high_prio = yes
		
		potential = {
			society_member_of = secret_religious_cult

			society_rank == 4
		}
	
		allow = {
			OR = {
				AND = {
					has_society_currency_major_trigger = yes
					#ROOTs_secret_religion_is_playable_trigger = yes	
				}
				hidden_tooltip = {
					ai = yes
				}
			}
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			war = no
		}
		
		effect = {
			hidden_effect = { # To track the number of Revealed Cults
				change_variable = { which = global_revealed_cults value = 1 }
				if = {
					limit = {
						secret_religion = the_seven
					}
					change_variable = { which = global_the_seven_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = the_mother
					}
					change_variable = { which = global_the_mother_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = the_stranger
					}
					change_variable = { which = global_the_stranger_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = the_smith
					}
					change_variable = { which = global_the_smith_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = lady_of_the_waves
					}
					change_variable = { which = global_lady_of_the_waves_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = vulture_god
					}
					change_variable = { which = global_vulture_god_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = old_gods
					}
					change_variable = { which = global_old_gods_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = old_gods_beyond
					}
					change_variable = { which = global_old_gods_beyond_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = old_gods_beyond_white
					}
					change_variable = { which = global_old_gods_beyond_white_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = drowned_god
					}
					change_variable = { which = global_drowned_god_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = storm_god
					}
					change_variable = { which = global_storm_god_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = rhllor
					}
					change_variable = { which = global_rhllor_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = moonsingers
					}
					change_variable = { which = global_moonsingers_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = faceless_men
					}
					change_variable = { which = global_faceless_men_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = maiden_of_the_harvest
					}
					change_variable = { which = global_maiden_of_the_harvest_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = bearded_priests_reformed
					}
					change_variable = { which = global_bearded_priests_reformed_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = bearded_priests
					}
					change_variable = { which = global_bearded_priests_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = boashi_reformed
					}
					change_variable = { which = global_boashi_reformed_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = boashi
					}
					change_variable = { which = global_boashi_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = trios
					}
					change_variable = { which = global_trios_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = valyrian
					}
					change_variable = { which = global_valyrian_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = the_dragon_gods
					}
					change_variable = { which = global_the_dragon_gods_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = the_plundering_Dragon
					}
					change_variable = { which = global_the_plundering_Dragon_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = the_weeping_lady
					}
					change_variable = { which = global_the_weeping_lady_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = black_flag
					}
					change_variable = { which = global_black_flag_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = lady_of_the_rocks
					}
					change_variable = { which = global_lady_of_the_rocks_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = dothraki
					}
					change_variable = { which = global_dothraki_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = rhoynar
					}
					change_variable = { which = global_rhoynar_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = harpy
					}
					change_variable = { which = global_harpy_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = yiti_gods
					}
					change_variable = { which = global_yiti_gods_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = lion_night
					}
					change_variable = { which = global_bon_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = old_ones
					}
					change_variable = { which = global_old_ones_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = shadowbinders
					}
					change_variable = { which = global_shadowbinders_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = gods_bone_mountains
					}
					change_variable = { which = global_gods_bone_mountains_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = gods_nghai
					}
					change_variable = { which = global_gods_nghai_revealed_cults value = 1 }
				}
				if = {
					limit = {
						secret_religion = stone_cow
					}
					change_variable = { which = global_stone_cow_revealed_cults value = 1 }
				}
			}
			detract_society_currency_major_effect = yes
			custom_tooltip = {
				text = openly_adopt_faith_effect_tooltip
				#if = { # Caliphates and Fylkirates are forfeit
				#	limit = {
				#		OR = {
				#			religion_group = muslim
				#			religion = stone_cow
				#		}
				#		any_demesne_title = {
				#			controls_religion = yes
				#		}
				#	}
				#	any_demesne_title = {
				#		limit = {
				#			controls_religion = yes
				#		}
				#		destroy_landed_title = THIS
				#	}
				#}
				if = { # Papacies are given to a random new character
					limit = {
						#NOR = {
							religion = the_seven
						#	religion = stone_cow
						#}
						any_demesne_title = {
							controls_religion = yes
						}
					}
					hidden_tooltip = {
						liege = {
							save_event_target_as = liege_target
						}
						create_character = {
							age = 38
							dynasty = random
							religion = ROOT
							culture = ROOT
							random_traits = yes
						}
						new_character = {
							save_event_target_as = new_holder
						}
					}
					any_demesne_title = {
						limit = {
							controls_religion = yes
						}
						grant_title = event_target:new_holder
						holder_scope = {
							any_vassal = {
								set_defacto_liege = event_target:liege_target
							}
						}
					}
					hidden_tooltip = {
						set_defacto_liege = event_target:liege_target
					}
				}
				if = { # Holy Orders/Static Mercs are given to a random new character
					limit = {
						any_demesne_title = {
							OR = {
								holy_order = yes
								mercenary = yes
							}
						}
					}
					hidden_tooltip = {
						liege = {
							save_event_target_as = liege_target
						}
						create_character = {
							age = 38
							dynasty = random
							religion = ROOT
							culture = ROOT
							random_traits = yes
						}
						new_character = {
							save_event_target_as = new_holder
						}
					}
					any_demesne_title = {
						limit = {
							OR = {
								holy_order = yes
								mercenary = yes
							}
						}
						grant_title = event_target:new_holder
						holder_scope = {
							any_vassal = {
								set_defacto_liege = event_target:liege_target
							}
						}
					}
					hidden_tooltip = {
						set_defacto_liege = event_target:liege_target
					}
				}
				hidden_effect = {
					character_event = { id = MNM.3811 }
					any_society_member = {
						if = {
							limit = {
								NOT = {
									character = ROOT
								}
								same_society_as = ROOT
							}
							character_event = { id = MNM.3800 } # Convert cultists
						}
					}
					top_liege = {
						any_realm_character = {
							if = {
								limit = {
									NOT = {
										same_society_as = ROOT
									}
									OR = {
										has_prevs_secret_religion_truly_trigger = yes
										has_sympathy_for_true_religion_of_prev_trigger = yes
									}
								}
								character_event = { id = MNM.3810 } # Allow sympathisers the chance to flip
							}
							
							if = {
								limit = {
									is_ruler = yes
									any_demesne_province = {
										OR = {
											AND = {
												has_province_modifier = secret_the_seven_community
												ROOT = {
													society_member_of = secret_religious_society_the_seven
												}
											}
											
											AND = {
												has_province_modifier = secret_the_seven_gods_community
												ROOT = {
													society_member_of = secret_religious_society_the_seven_gods
												}
											}
											
											AND = {
												has_province_modifier = secret_the_mother_community
												ROOT = {
													society_member_of = secret_religious_society_the_mother
												}
											}
											
											AND = {
												has_province_modifier = secret_the_stranger_community
												ROOT = {
													society_member_of = secret_religious_society_the_stranger
												}
											}
											
											AND = {
												has_province_modifier = secret_the_smith_community
												ROOT = {
													society_member_of = secret_religious_society_the_smith
												}
											}
											AND = {
												has_province_modifier = secret_lady_of_the_waves_community
												ROOT = {
													society_member_of = secret_religious_society_lady_of_the_waves
												}
											}
											
											AND = {
												has_province_modifier = secret_vulture_god_community
												ROOT = {
													society_member_of = secret_religious_society_vulture_god
												}
											}
											
											AND = {
												has_province_modifier = secret_old_gods_community
												ROOT = {
													society_member_of = secret_religious_society_old_gods
												}
											}
											
											AND = {
												has_province_modifier = secret_old_gods_beyond_community
												ROOT = {
													society_member_of = secret_religious_society_old_gods_beyond
												}
											}
											
											AND = {
												has_province_modifier = secret_old_gods_beyond_white_community
												ROOT = {
													society_member_of = secret_religious_society_old_gods_beyond_white
												}
											}
											
											AND = {
												has_province_modifier = secret_drowned_god_community
												ROOT = {
													society_member_of = secret_religious_society_drowned_god
												}
											}
											
											AND = {
												has_province_modifier = secret_storm_god_community
												ROOT = {
													society_member_of = secret_religious_society_storm_god
												}
											}
											
											AND = {
												has_province_modifier = secret_rhllor_community
												ROOT = {
													society_member_of = secret_religious_society_rhllor
												}
											}
											
											AND = {
												has_province_modifier = secret_moonsingers_community
												ROOT = {
													society_member_of = secret_religious_society_moonsingers
												}
											}
											
											AND = {
												has_province_modifier = secret_faceless_men_community
												ROOT = {
													society_member_of = secret_religious_society_faceless_men
												}
											}
											
											AND = {
												has_province_modifier = secret_maiden_of_the_harvest_community
												ROOT = {
													society_member_of = secret_religious_society_maiden_of_the_harvest
												}
											}
											
											AND = {
												has_province_modifier = secret_bearded_priests_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_bearded_priests_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_bearded_priests_community
												ROOT = {
													society_member_of = secret_religious_society_bearded_priests
												}
											}
											
											AND = {
												has_province_modifier = secret_boashi_reformed_community
												ROOT = {
													society_member_of = secret_religious_society_boashi_reformed
												}
											}
											
											AND = {
												has_province_modifier = secret_boashi_community
												ROOT = {
													society_member_of = secret_religious_society_boashi
												}
											}
											
											AND = {
												has_province_modifier = secret_trios_community
												ROOT = {
													society_member_of = secret_religious_society_trios
												}
											}
											
											AND = {
												has_province_modifier = secret_valyrian_community
												ROOT = {
													society_member_of = secret_religious_society_valyrian
												}
											}
											
											AND = {
												has_province_modifier = secret_the_dragon_gods_community
												ROOT = {
													society_member_of = secret_religious_society_the_dragon_gods
												}
											}
											
											AND = {
												has_province_modifier = secret_the_plundering_dragon_community
												ROOT = {
													society_member_of = secret_religious_society_the_plundering_dragon
												}
											}
											
											AND = {
												has_province_modifier = secret_the_weeping_lady_community
												ROOT = {
													society_member_of = secret_religious_society_the_weeping_lady
												}
											}
											
											AND = {
												has_province_modifier = secret_lady_of_the_rocks_community
												ROOT = {
													society_member_of = secret_religious_society_lady_of_the_rocks
												}
											}
											
											AND = {
												has_province_modifier = secret_black_flag_community
												ROOT = {
													society_member_of = secret_religious_society_black_flag
												}
											}
											
											AND = {
												has_province_modifier = secret_dothraki_community
												ROOT = {
													society_member_of = secret_religious_society_dothraki
												}
											}
											
											AND = {
												has_province_modifier = secret_rhoynar_community
												ROOT = {
													society_member_of = secret_religious_society_rhoynar
												}
											}
											
											AND = {
												has_province_modifier = secret_harpy_community
												ROOT = {
													society_member_of = secret_religious_society_harpy
												}
											}
											
											AND = {
												has_province_modifier = secret_yiti_gods_community
												ROOT = {
													society_member_of = secret_religious_society_yiti_gods
												}
											}
											
											AND = {
												has_province_modifier = secret_lion_night_community
												ROOT = {
													society_member_of = secret_religious_society_lion_night
												}
											}
											
											AND = {
												has_province_modifier = secret_starry_wisdom_community
												ROOT = {
													society_member_of = secret_religious_society_starry_wisdom
												}
											}
											
											AND = {
												has_province_modifier = secret_old_ones_community
												ROOT = {
													society_member_of = secret_religious_society_old_ones
												}
											}
											
											AND = {
												has_province_modifier = secret_shadowbinders_community
												ROOT = {
													society_member_of = secret_religious_society_shadowbinders
												}
											}
											
											AND = {
												has_province_modifier = secret_gods_bone_mountains_community
												ROOT = {
													society_member_of = secret_religious_society_gods_bone_mountains
												}
											}
											
											AND = {
												has_province_modifier = secret_gods_nghai_community
												ROOT = {
													society_member_of = secret_religious_society_gods_nghai
												}
											}
											
											AND = {
												has_province_modifier = secret_stone_cow_community
												ROOT = {
													society_member_of = secret_religious_society_stone_cow
												}
											}
										}
									}
								}
								if = {
									limit = { NOT = { has_character_flag = currently_part_of_secret_religion_uncovering } }
									character_event = { id = MNM.3820 } # Flip provinces with local cult modifier
								}
								if = {
									limit = { has_character_flag = currently_part_of_secret_religion_uncovering }
									ROOT = {
										trigger_switch = {
											on_trigger = society_member_of
											secret_religious_society_the_seven = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_the_seven_community
														}
														religion = the_seven
														remove_province_modifier = secret_the_seven_community
													}
												}
											}
											secret_religious_society_the_seven_gods = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_the_seven_gods_community
														}
														religion = the_seven_gods
														remove_province_modifier = secret_the_seven_gods_community
													}
												}
											}
											secret_religious_society_the_mother = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_the_mother_community
														}
														religion = the_mother
														remove_province_modifier = secret_the_mother_community
													}
												}
											}
											secret_religious_society_the_stranger = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_the_stranger_community
														}
														religion = the_stranger
														remove_province_modifier = secret_the_stranger_community
													}
												}
											}
											secret_religious_society_the_smith = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_the_smith_community
														}
														religion = the_smith
														remove_province_modifier = secret_the_smith_community
													}
												}
											}
											secret_religious_society_lady_of_the_waves = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_lady_of_the_waves_community
														}
														religion = lady_of_the_waves
														remove_province_modifier = secret_lady_of_the_waves_community
													}
												}
											}
											secret_religious_society_vulture_god = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_vulture_god_community
														}
														religion = vulture_god
														remove_province_modifier = secret_vulture_god_community
													}
												}
											}
											secret_religious_society_old_gods = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_old_gods_community
														}
														religion = old_gods
														remove_province_modifier = secret_old_gods_community
													}
												}
											}
											secret_religious_society_old_gods_beyond = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_old_gods_beyond_community
														}
														religion = old_gods_beyond
														remove_province_modifier = secret_old_gods_beyond_community
													}
												}
											}
											secret_religious_society_old_gods_beyond_white = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_old_gods_beyond_white_community
														}
														religion = old_gods_beyond_white
														remove_province_modifier = secret_old_gods_beyond_white_community
													}
												}
											}
											secret_religious_society_drowned_god = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_drowned_god_community
														}
														religion = drowned_god
														remove_province_modifier = secret_drowned_god_community
													}
												}
											}
											secret_religious_society_rhllor = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_rhllor_community
														}
														religion = rhllor
														remove_province_modifier = secret_rhllor_community
													}
												}
											}
											secret_religious_society_moonsingers = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_moonsingers_community
														}
														religion = moonsingers
														remove_province_modifier = secret_moonsingers_community
													}
												}
											}
											secret_religious_society_faceless_men = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_faceless_men_community
														}
														religion = faceless_men
														remove_province_modifier = secret_faceless_men_community
													}
												}
											}
											secret_religious_society_maiden_of_the_harvest = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_maiden_of_the_harvest_community
														}
														religion = maiden_of_the_harvest
														remove_province_modifier = secret_maiden_of_the_harvest_community
													}
												}
											}
											secret_religious_society_bearded_priests_reformed = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_bearded_priests_reformed_community
														}
														religion = bearded_priests_reformed
														remove_province_modifier = secret_bearded_priests_reformed_community
													}
												}
											}
											secret_religious_society_bearded_priests = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_bearded_priests_community
														}
														religion = bearded_priests
														remove_province_modifier = secret_bearded_priests_community
													}
												}
											}
											secret_religious_society_boashi_reformed = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_boashi_reformed_community
														}
														religion = boashi_reformed
														remove_province_modifier = secret_boashi_reformed_community
													}
												}
											}
											secret_religious_society_boashi = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_boashi_community
														}
														religion = boashi
														remove_province_modifier = secret_boashi_community
													}
												}
											}
											secret_religious_society_trios = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_trios_community
														}
														religion = trios
														remove_province_modifier = secret_trios_community
													}
												}
											}
											secret_religious_society_valyrian = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_valyrian_community
														}
														religion = valyrian
														remove_province_modifier = secret_valyrian_community
													}
												}
											}
											secret_religious_society_the_dragon_gods = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_the_dragon_gods_community
														}
														religion = the_dragon_gods
														remove_province_modifier = secret_the_dragon_gods_community
													}
												}
											}
											secret_religious_society_the_plundering_dragon = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_the_plundering_dragon_community
														}
														religion = the_plundering_dragon
														remove_province_modifier = secret_the_plundering_dragon_community
													}
												}
											}
											secret_religious_society_the_weeping_lady = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_the_weeping_lady_community
														}
														religion = the_weeping_lady
														remove_province_modifier = secret_the_weeping_lady_community
													}
												}
											}
											secret_religious_society_lady_of_the_rocks = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_lady_of_the_rocks_community
														}
														religion = lady_of_the_rocks
														remove_province_modifier = secret_lady_of_the_rocks_community
													}
												}
											}
											secret_religious_society_black_flag = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_black_flag_community
														}
														religion = black_flag
														remove_province_modifier = secret_black_flag_community
													}
												}
											}
											secret_religious_society_dothraki = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_dothraki_community
														}
														religion = dothraki
														remove_province_modifier = secret_dothraki_community
													}
												}
											}
											secret_religious_society_rhoynar = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_rhoynar_community
														}
														religion = rhoynar
														remove_province_modifier = secret_rhoynar_community
													}
												}
											}
											secret_religious_society_harpy = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_harpy_community
														}
														religion = harpy
														remove_province_modifier = secret_harpy_community
													}
												}
											}
											secret_religious_society_yiti_gods = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_yiti_gods_community
														}
														religion = yiti_gods
														remove_province_modifier = secret_yiti_gods_community
													}
												}
											}
											secret_religious_society_lion_night = { 
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_lion_night_community
														}
														religion = lion_night
														remove_province_modifier = secret_lion_night_community
													}
												}
											}
											secret_religious_society_starry_wisdom = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_starry_wisdom_community
														}
														religion = starry_wisdom
														remove_province_modifier = secret_starry_wisdom_community
													}
												}
											}
											secret_religious_society_old_ones = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_old_ones_community
														}
														religion = old_ones
														remove_province_modifier = secret_old_ones_community
													}
												}
											}
											secret_religious_society_shadowbinders = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_shadowbinders_community
														}
														religion = shadowbinders
														remove_province_modifier = secret_shadowbinders_community
													}
												}
											}
											secret_religious_society_gods_bone_mountains = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_gods_bone_mountains_community
														}
														religion = gods_bone_mountains
														remove_province_modifier = secret_gods_bone_mountains_community
													}
												}
											}
											secret_religious_society_gods_nghai = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_gods_nghai_community
														}
														religion = gods_nghai
														remove_province_modifier = secret_gods_nghai_community
													}
												}
											}
											secret_religious_society_stone_cow = {
												PREV = {
													any_demesne_province = {
														limit = {
															has_province_modifier = secret_stone_cow_community
														}
														religion = stone_cow
														remove_province_modifier = secret_stone_cow_community
													}
												}
											}
										}
									}
								}
							}
						}
					}
					flip_secret_religious_community_provinces = yes
					flip_to_secret_religion_effect = yes
					
					top_liege = {
						any_realm_lord = {
							character_event = { id = MNM.3830 } # Inform lieges unless they're part of the cult flipping, save a flag on previous events.
						}
						
						any_realm_character = {
							limit = {
								NOT = {
									character = ROOT
								}
								same_society_as = ROOT
							}
							leave_society = yes
						}
						
						any_realm_character = {
							limit = {
								has_character_flag = currently_part_of_secret_religion_uncovering
							}
							clr_character_flag = currently_part_of_secret_religion_uncovering
						}
					}
					any_society_member = {
						limit = {
							NOT = {
								character = ROOT
							}
							same_society_as = ROOT
						}
						leave_society = yes
					}
					leave_society = yes
				}
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1 # Slow down
			}
			modifier = {
				factor = 0.1
				is_landed = no
			}
			modifier = {
				factor = 0
				prisoner = yes
			}
			modifier = {
				factor = 0.001
				any_society_member = {
					NOT = { character = ROOT }
					same_realm = ROOT
					ai = no
				}
				NOT = {
					top_liege = {
						OR = {
							same_society_as = ROOT
							is_openly_of_roots_secret_religion_trigger = yes
						}
					}
				}
			}
			modifier = {
				factor = 0
				top_liege = {
					war = yes
				}
			}
			modifier = { #Don't do it unless you are confident in support
				factor = 0
				NOR = {
					AND = { # The Top Liege is in the Secret Cult, and at least 3 of the Liege's direct vassals are also members
						top_liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_roots_secret_religion_trigger = yes
							}
						}
						top_liege = {
							any_vassal = {
								count = 3
								higher_tier_than = BARON
								prisoner = no
								OR = {
									same_society_as = ROOT
									is_openly_of_roots_secret_religion_trigger = yes
								}
							}
						}
					}
					top_liege = { # At least 5 direct vassals of the Top Liege is in the Secret Cult
						any_vassal = {
							count = 5
							higher_tier_than = BARON
							prisoner = no
							OR = {
								same_society_as = ROOT
								is_openly_of_roots_secret_religion_trigger = yes
							}
						}
					}
					top_liege = { # All direct vassals of the Top Liege are in the Secret Cult
						NOT = {
							any_vassal = {
								higher_tier_than = BARON
								NOR = {
									same_society_as = ROOT
									is_openly_of_roots_secret_religion_trigger = yes
								}
							}
						}
					}
					top_liege = {
						realm_character_percent = {
							target = 0.30
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
					}
					AND = {
						top_liege = {
							realm_character_percent = {
								target = 0.25
								OR = {
									same_society_as = ROOT
									is_openly_of_prevs_secret_religion_trigger = yes
								}
							}
						}
						liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
					}
					AND = {
						top_liege = {
							realm_character_percent = {
								target = 0.20
								OR = {
									same_society_as = ROOT
									is_openly_of_prevs_secret_religion_trigger = yes
								}
							}
						}
						top_liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
						liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
					}
					AND = {
						top_liege = {
							realm_character_percent = {
								target = 0.15
								OR = {
									same_society_as = ROOT
									is_openly_of_prevs_secret_religion_trigger = yes
								}
							}
						}
						any_vassal = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
						top_liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
						liege = {
							OR = {
								same_society_as = ROOT
								is_openly_of_prevs_secret_religion_trigger = yes
							}
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.15
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.25
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.35
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.5
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
			modifier = {
				factor = 1.5
				realm_character_percent = {
					target = 0.65
					OR = {
						same_society_as = ROOT
						is_openly_of_prevs_secret_religion_trigger = yes
					}
				}				
			}
		}
	}

	secret_religions_blend_in = {
		
		potential = {
			society_member_of = secret_religious_cult
			has_quest = quest_secret_religions_societies_blend_in
			NOT = { has_character_modifier = attempting_to_blend_in }
		}
		allow = {
			has_quest = quest_secret_religions_societies_blend_in
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = quest_secret_religions_societies_blend_in_allow_tt
				OR = {
					NOT = { has_character_flag = blending_in_timer }
					had_character_flag = { flag = blending_in_timer days = 1000 }
				}
			}
		}

		effect = {
			add_character_modifier = {
				name = attempting_to_blend_in
				duration = -1
			}
			hidden_effect = { character_event = { id = MNM.3399 } }
		}

		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0.1

			modifier = {
				factor = 0.01
				war = yes
			}
			modifier = {
				factor = 2
				OR = {
					trait = gregarious
					trait = socializer
				}
			}
			modifier = {
				factor = 0.1
				trait = shy
			}
			modifier = {
				factor = 0.1
				is_dumb_trigger = yes
			}
		}
	}
}

targeted_decisions = {
	secret_religions_conduct_secret_ceremony = {
		is_in_society = yes
		
		filter = self
		ai_target_filter = self
		
		potential = {
			society_member_of = secret_religious_cult
			has_quest = quest_secret_religions_conduct_secret_ceremony 
		}
		allow = {
			has_quest = quest_secret_religions_conduct_secret_ceremony
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = quest_secret_religions_conduct_secret_ceremony_allow_tt
				OR = {
					NOT = { has_character_flag = conduct_secret_ceremony_timer }
					had_character_flag = { flag = conduct_secret_ceremony_timer days = 1000 }
				}
			}
		}

		effect = {
			set_character_flag = conduct_secret_ceremony_timer
			hidden_effect = { character_event = { id = MNM.3235 days = 5 } }
		}

		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0.1
			modifier = {
				is_ruler = yes
				factor = 10
			}
			modifier = {
				diplomacy = 12
    			factor = 3
			}
			modifier = {
				diplomacy = 15
    			factor = 3
			}
			modifier = {
				trait = paranoid
    			factor = 0.1
			}
			modifier = {
				trait = craven
    			factor = 0.1
			}
		}
	}
	
	secret_religions_induct_child = {
		is_in_society = yes
		
		ai_target_filter = home_court

		from_potential = {
			society_member_of = secret_religious_cult
		}

		potential = {
			NOT = {
				character = FROM
			}
			OR = {
				mother = { character = FROM }
				father = { character = FROM }
				educator = { character = FROM }
				guardian = { character = FROM }
			}
			has_secret_religion_trait_trigger = no
			FROM = { ROOT = { is_openly_of_prevs_secret_religion_trigger = no } }
			is_adult = no
		}

		allow = {
			FROM = {
				prisoner = no
				is_inaccessible_trigger = no
				NOT = { trait = incapable }
			}
			age = 8
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = secret_religions_induct_child_allow_tt
				FROM = { shares_prevs_secret_religion_trigger = no }
			}
			custom_tooltip = {
				text = secret_religions_induct_character_cd_tt
				NOT = { has_character_modifier = secret_religions_induct_child_timer }
			}
		}

		effect = {
			custom_tooltip = {
				text = secret_religions_induct_child_effect

				FROM = { character_event = { id = MNM.3438 } }

				hidden_effect = {
					add_character_modifier = {
						name = secret_religions_induct_child_timer
						years = 6
						hidden = yes
					}
				}
			}
			FROM = { 
				if = { 
					limit = {
						is_society_grandmaster = yes
					}
					increase_visibility_minor_effect = yes
				}
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_effect = yes
				}
			}
		}

		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				FROM = { has_quest = quest_secret_religious_societies_induct_ruler }
    			is_quest_target_of = FROM
    			factor = 100
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_societies_induct_ruler }
    			NOT = {
					is_quest_target_of = FROM
				}
    			factor = 0.01
			}
			modifier = {
				OR = {
					mother = { character = FROM }
					father = { character = FROM }
				}
				factor = 10
			}
			modifier = {
				FROM = { current_heir = { character = ROOT } }
				factor = 10
			}
			modifier = {
				is_friend = FROM
				factor = 10
			}
			modifier = {
				trait = trusting
				factor = 5
			}
			modifier = {
				ai = no
				factor = 5
			}
			modifier = {
				OR = {
					mother = { ai = no }
					father = { ai = no }
				}
				factor = 0.1
			}
		}
	}
	
	secret_religions_recruit = {
		is_in_society = yes
		
		filter = realm 
		ai_target_filter = realm

		from_potential = {
			society_member_of = secret_religious_cult
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			OR = { # Performance saving measures
				has_society_currency_tiny_trigger = yes
				ai = no
			}
			OR = {
				ai = no
				is_society_grandmaster = yes
				num_of_society_members < 90
			}
		}

		potential = {
			OR = {
				FROM = { ai = no } #Either a player is using the decision, OR the target is interested in the AI's secret religious cult
				ai = yes # Or the target is an AI...
				AND = {
					ai = no
					is_in_society = no
					interested_in_society_of_character = FROM
				}
			}
			
			FROM = {
				OR = {
					ai = yes
					same_realm = PREV
				}
				secret_religion = PREV
			}
			
			is_adult = yes
			NOT = {
				character = FROM
				society = {
					FROM = {
						society = {
							society_type = prevprev
						}
					}
				}
			}

			#AI can't invite when the society is full
			NAND = {
				ai = yes
				FROM = { ai = yes }
				NOT = {
					FROM = {
						society = {
							ROOT = {
								can_join_society = PREV
							}
						}
					}
				}
			}
		}

		allow = {
			FROM = {
				NOT = {
					has_character_modifier = accused_apostate
				}
				prisoner = no
				is_inaccessible_trigger = no
				NOT = { trait = incapable }
			}
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = secret_religions_recruit_allow_tt
				FROM = { shares_prevs_secret_religion_trigger = yes }
			}
			custom_tooltip = {
				text = secret_religions_recruit_cd_tt
				NOT = { has_character_modifier = secret_religions_recruitment_timer }
			}
		}

		effect = {
			custom_tooltip = { 	
				text = secret_religions_recruit_effect_tt
				FROM = { save_event_target_as = secret_religion_recruiter } 
				character_event = { id = MNM.3420 }

				add_character_modifier = {
					name = secret_religions_recruitment_timer
					years = 10
					hidden = yes
				}
			}
			FROM = { 
				if = { 
					limit = {
						is_society_grandmaster = yes
					}
					increase_visibility_minor_effect = yes
				}
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_effect = yes
				}
			}
		}

		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				is_ruler = yes
				factor = 10
			}
			modifier = {
				ai = no
				factor = 5
			}
			modifier = {
				diplomacy = 12
    			factor = 3
			}
			modifier = {
				diplomacy = 15
    			factor = 3
			}
			modifier = {
				trait = paranoid
    			factor = 0.1
			}
			modifier = {
				trait = craven
    			factor = 0.1
			}
			modifier = {
				factor = 0 # don't recruit characters interested in something else
				NOT = { interested_in_society = secret_religious_cult }
				is_interested_in_any_society = yes
			}
			modifier = {
				NOT = {
					any_realm_character = {
						ai = no
					}
				}
    			factor = 0.1
			}
		}
	}

	secret_religions_induct_character = {
		is_in_society = yes
		
		filter = realm
		ai_target_filter = realm
		
		from_potential = {
			society_member_of = secret_religious_cult
			society_rank >= 2
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			OR = { # Performance saving measure
				has_society_currency_tiny_trigger = yes
				ai = no
			}
			OR = {
				ai = no
				is_society_grandmaster = yes
				num_of_society_members < 90
			}
		}
		
		potential = {
			NOT = {
				character = FROM
			}
			is_adult = yes
			FROM = { 
				ROOT = { 
					NOT = {
						secret_religion = PREV
					}
					is_openly_of_prevs_secret_religion_trigger = no
				} 
			}
			FROM = { 
				ROOT = { 
					OR = {
						has_sympathy_for_true_religion_of_prev_trigger = yes
						is_openly_of_prevs_true_religion_group = yes 
					}
				}
			}
		}

		allow = {
			FROM = {
				NOT = {
					has_character_modifier = accused_apostate
				}
				prisoner = no
				is_inaccessible_trigger = no
				NOT = { trait = incapable }
			}
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = secret_religions_induct_character_cd_tt
				OR = {
					NOT = { has_character_modifier = secret_religion_induction_timer }
					has_quest = quest_secret_religious_societies_induct_ruler
				}
			}
			OR = {
				AND = {
					is_ruler = no
					FROM = { has_society_currency_tiny_trigger = yes }
				}
				hidden_tooltip = {
					FROM = {
						has_society_currency_tiny_trigger = yes
						ai = yes
						is_society_grandmaster = yes
					}
				}
				AND = {
					is_ruler = yes
					FROM = { has_society_currency_minor_trigger = yes }
				}
			}
		}

		effect = {
			if = {
				limit = { 
					is_ruler = no  
					hidden_tooltip = {
						FROM = {
							NAND = {
								ai = yes
								is_society_grandmaster = yes
							}
						}
					}
				}
				FROM = { detract_society_currency_tiny_effect = yes }
			}
			if = {
				limit = {
					FROM = {
						ai = yes
						is_society_grandmaster = yes
					}
				}
				FROM = { detract_society_currency_tiny_effect = yes }
			}
			if = {
				limit = {
					is_ruler = yes
					hidden_tooltip = {
						FROM = {
							NAND = {
								ai = yes
								is_society_grandmaster = yes
							}
						}
					}
				}
				FROM = { detract_society_currency_minor_effect = yes }
			}

			hidden_effect = {
				add_character_modifier = {
					name = secret_religion_induction_timer
					years = 10
					hidden = yes
				}
			}

			custom_tooltip = {
				text = secret_religions_induct_character_effect_tt
				FROM = { character_event = { id = MNM.3408 days = 10 } }
			}
			FROM = { 
				if = { 
					limit = {
						is_society_grandmaster = yes
					}
					increase_visibility_minor_effect = yes
				}
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_effect = yes
				}
			}
		}

		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				FROM = { has_quest = quest_secret_religious_societies_induct_ruler }
    			is_quest_target_of = FROM
    			factor = 100
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_societies_induct_ruler }
				NOT = {
					is_quest_target_of = FROM
				}
				factor = 0.01 #to save targets for missions
			}
			modifier = {
				FROM = {
					NOT = { 
						is_society_grandmaster = yes
					}
				}
				factor = 0.1
			}
			modifier = {
				ai = no
				factor = 5
			}
			modifier = {
				is_ruler = yes
				factor = 10
			}
			modifier = {
				is_close_relative = FROM
				factor = 10
			}
			modifier = {
				is_lover = FROM
				factor = 10
			}
			modifier = {
				is_friend = FROM
				factor = 10
			}
			modifier = {
				trait = trusting
				factor = 5
			}
			modifier = {
				ai = no
				factor = 5
			}
			modifier = {
				NOT = {
					any_realm_character = {
						ai = no
					}
				}
    			factor = 0.01
			}
		}
	}
	
	secret_religions_evoke_sympathy = {
		is_in_society = yes
		
		filter = realm 
		ai_target_filter = realm

		from_potential = {
			society_member_of = secret_religious_cult
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			OR = { # Performance saving measure
				has_society_currency_tiny_trigger = yes
				ai = no
			}
			OR = {
				ai = no
				is_society_grandmaster = yes
				num_of_society_members < 90
			}
		}

		potential = {
			same_realm = FROM
			is_adult = yes
			NOT = { same_society_as = FROM }
			FROM = { 
				ROOT = { 
					has_sympathy_for_true_religion_of_prev_trigger = no
					is_openly_of_prevs_true_religion_group = no
					shares_prevs_secret_religion_trigger = no
				}
			}
			NOT = { 
				character = FROM
				society = {
					FROM = {
						society = {
							society_type = PREVPREV
						}
					}
				}
			}
		}

		allow = {
			FROM = {
				NOT = {
					has_character_modifier = accused_apostate
				}
				prisoner = no
				is_inaccessible_trigger = no
				NOT = { trait = incapable }
			}
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = secret_religions_evoke_sympathy_cd_tt
				OR = {
					NOT = { has_character_modifier = secret_religion_sympathy_timer }
					AND = {
						FROM = {
							has_quest = quest_secret_religious_societies_sympathy_ruler
							ROOT = { is_quest_target_of = FROM }
						}
					}
				}
			}
			FROM = {
				OR = {
					custom_tooltip = {
						text = evoke_sympathy_of_tt
						has_quest = quest_secret_religious_societies_sympathy_ruler
						ROOT = { is_quest_target_of = FROM }
					}
					has_society_currency_tiny_trigger = yes
				}
			}
		}

		effect = {
			if = {
				limit = {
					NOT = {
						AND = {
							FROM = { has_quest = quest_secret_religious_societies_sympathy_ruler }
							ROOT = { is_quest_target_of = FROM }
						}
					}
				}
				FROM = { detract_society_currency_tiny_effect = yes }
			}

			hidden_effect = {
				add_character_modifier = {
					name = secret_religion_sympathy_timer
					years = 10
					hidden = yes
				}
			}

			custom_tooltip = {
				text = secret_religions_evoke_sympathy_tt
				FROM = { character_event = { id = MNM.3404 days = 7 } }
			}
			FROM = {
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_minor_effect = yes
				}
			}
		}

		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				FROM = { has_quest = quest_secret_religious_societies_sympathy_ruler }
    			is_quest_target_of = FROM
    			factor = 100
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_societies_sympathy_ruler }
				NOT = {
					is_quest_target_of = FROM
				}
				factor = 0.01 #to save targets for missions
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_societies_induct_ruler } #to complete this mission, sympathy is needed first
    			is_quest_target_of = FROM
    			factor = 100
			}
			modifier = {
				FROM = { has_quest = quest_secret_religious_societies_induct_ruler }
    			NOT = {
					is_quest_target_of = FROM
				}
    			factor = 0.01
			}
			modifier = {
				FROM = {
					NOT = { 
						is_society_grandmaster = yes
					}
				}
				factor = 0.1
			}
			modifier = {
				is_ruler = yes
				factor = 3
			}
			modifier = {
				trait = zealous
				factor = 0.0001
			}
			modifier = {
				is_close_relative = FROM
				factor = 10
			}
			modifier = {
				is_lover = FROM
				factor = 10
			}
			modifier = {
				is_friend = FROM
				factor = 10
			}
			modifier = {
				trait = kind
				factor = 5
			}
			modifier = {
				trait = trusting
				factor = 5
			}
			modifier = {
				ai = no
				factor = 5
			}
		}
	}
	
	secret_religions_renounce_secret_religion = {
		only_playable = yes
		
		filter = self
		ai_target_filter = self
		
		potential = {
			character = FROM
			has_secret_religion = yes
		}
		
		allow = {
			NOT = { trait = incapable }
		}
		
		effect = {
			if = {
				limit = {
					society_member_of = secret_religious_cult
					is_society_grandmaster = yes
				}
				leave_society = yes
			}
			if = {
				limit = {
					capital_scope = {
						NOT = { true_religion_group = ROOT }
					}
				}
				prestige = -1000
			}
			if = {
				limit = {
					capital_scope = {
						true_religion_group = ROOT
						NOT = { true_religion = ROOT }
					}
				}
				prestige = -500
			}
			piety = 250
			true_religion_scope = {
				show_scope_change = no
				religion_authority = {
					modifier = ruler_converted_from
				}
			}
			clear_secret_religion = yes
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secret_religions_personally_adopt_secret_religion = {
		only_playable = yes
		
		filter = self
		ai_target_filter = self
		
		potential = {
			character = FROM
			has_secret_religion = yes
		}
		
		allow = {
			NOT = { trait = incapable }
			#ROOTs_secret_religion_is_playable_trigger = yes	
		}
		
		effect = {
			flip_to_secret_religion_effect = yes
			trigger_switch = {
				on_trigger = religion
				the_seven = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_the_seven_community } religion = the_seven
					}
				}
				the_seven_gods = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_the_seven_gods_community } religion = the_seven_gods
					}
				}
				the_mother = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_the_mother_community } religion = the_mother
					}
				}
				the_stranger = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_the_stranger_community } religion = the_stranger
					}
				}
				the_smith = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_the_smith_community } religion = the_smith
					}
				}
				lady_of_the_waves = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_lady_of_the_waves_community } religion = lady_of_the_waves
					}
				}
				vulture_god = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_vulture_god_community } religion = vulture_god
					}
				}
				old_gods = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_old_gods_community } religion = old_gods
					}
				}
				old_gods_beyond = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_old_gods_beyond_community } religion = old_gods_beyond
					}
				}
				old_gods_beyond_white = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_old_gods_beyond_white_community } religion = old_gods_beyond_white
					}
				}
				drowned_god = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_drowned_god_community } religion = drowned_god
					}
				}
				rhllor = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_rhllor_community } religion = rhllor
					}
				}
				moonsingers = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_moonsingers_community } religion = moonsingers
					}
				}
				faceless_men = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_faceless_men_community } religion = faceless_men
					}
				}
				maiden_of_the_harvest = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_maiden_of_the_harvest_community } religion = maiden_of_the_harvest
					}
				}
				bearded_priests_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_bearded_priests_reformed_community } religion = bearded_priests_reformed
					}
				}
				bearded_priests = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_bearded_priests_community } religion = bearded_priests
					}
				}
				boashi_reformed = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_boashi_reformed_community } religion = boashi_reformed
					}
				}
				boashi = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_boashi_community } religion = boashi
					}
				}
				trios = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_trios_community } religion = trios
					}
				}
				valyrian = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_valyrian_community } religion = valyrian
					}
				}
				the_dragon_gods = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_the_dragon_gods_community } religion = the_dragon_gods
					}
				}
				the_plundering_dragon = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_the_plundering_dragon_community } religion = the_plundering_dragon						 
					}
				}
				the_weeping_lady = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_the_weeping_lady_community } religion = the_weeping_lady
					}
				}
				lady_of_the_rocks = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_lady_of_the_rocks_community } religion = lady_of_the_rocks
					}
				}
				black_flag = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_black_flag_community } religion = black_flag
					}
				}
				dothraki = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_dothraki_community } religion = dothraki
					}
				}
				rhoynar = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_rhoynar_community } religion = rhoynar
					}
				}
				harpy = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_harpy_community } religion = harpy					  
					}
				}
				yiti_gods = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_yiti_gods_community } religion = yiti_gods						 
					}
				}
				lion_night = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_lion_night_community } religion = lion_night						 
					}
				}
				starry_wisdom = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_starry_wisdom_community } religion = starry_wisdom								  
					}
				}
				old_ones = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_old_ones_community } religion = old_ones						 
					}
				}
				shadowbinders = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_shadowbinders_community } religion = shadowbinders										
					}
				}
				gods_bone_mountains = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_gods_bone_mountains_community } religion = dothraki							   
					}
				}
				gods_nghai = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_gods_nghai_community } religion = gods_nghai							   
					}
				}
				stone_cow = {
					any_demesne_province = {
						limit = { has_province_modifier = secret_stone_cow_community } religion = stone_cow					  
					}
				}
			}
			if = {
				limit = {
					liege = {
						NOT = {
							character = ROOT
						}
					}
				}
				liege = {
					character_event = { id = MNM.3840 }
				}
			}
			hidden_tooltip = {
				set_variable = { which = visibility_value value = 0 }
				remove_character_modifier = highly_suspect
				remove_character_modifier = under_suspicion
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

#########################################################################################################
################ Secret society title decisions
#########################################################################################################
title_decisions = {
	secret_religions_prepare_grounds = {
		only_playable = yes
		
		ai_target_filter = realm_owned
		filter = realm_owned
		
		from_potential = {
			society_rank > 2
			society_member_of = secret_religious_cult
		}
		
		potential = {
			tier = COUNT
			holder_scope = {
				OR = {
					character = FROM
					any_liege = { character = FROM }
				}
			}
			OR = {
				AND = {
					FROM = {
						society_member_of = secret_religious_society_the_seven
					}
					NOT = { location = { religion = the_seven } }
					NOT = { location = { has_province_modifier = secret_the_seven_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_the_seven_gods
					}
					NOT = { location = { religion = the_seven_gods } }
					NOT = { location = { has_province_modifier = secret_the_seven_gods_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_the_mother
					}
					NOT = { location = { religion = the_mother } }
					NOT = { location = { has_province_modifier = secret_the_mother_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_the_stranger
					}
					NOT = { location = { religion = the_stranger } }
					NOT = { location = { has_province_modifier = secret_the_stranger_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_the_smith
					}
					NOT = { location = { religion = the_smith } }
					NOT = { location = { has_province_modifier = secret_the_smith_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_lady_of_the_waves
					}
					NOT = { location = { religion = lady_of_the_waves } }
					NOT = { location = { has_province_modifier = secret_lady_of_the_waves_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_vulture_god
					}
					NOT = { location = { religion = vulture_god } }
					NOT = { location = { has_province_modifier = secret_vulture_god_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_old_gods
					}
					NOT = { location = { religion = old_gods } }
					NOT = { location = { has_province_modifier = secret_old_gods_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_old_gods_beyond
					}
					NOT = { location = { religion = old_gods_beyond } }
					NOT = { location = { has_province_modifier = secret_old_gods_beyond_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_old_gods_beyond_white
					}
					NOT = { location = { religion = old_gods_beyond_white } }
					NOT = { location = { has_province_modifier = secret_old_gods_beyond_white_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_drowned_god
					}
					NOT = { location = { religion = drowned_god } }
					NOT = { location = { has_province_modifier = secret_drowned_god_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_storm_god
					}
					NOT = { location = { religion = storm_god } }
					NOT = { location = { has_province_modifier = secret_storm_god_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_rhllor
					}
					NOT = { location = { religion = rhllor } }
					NOT = { location = { has_province_modifier = secret_rhllor_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_moonsingers
					}
					NOT = { location = { religion = moonsingers } }
					NOT = { location = { has_province_modifier = secret_moonsingers_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_faceless_men
					}
					NOT = { location = { religion = faceless_men } }
					NOT = { location = { has_province_modifier = secret_faceless_men_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_maiden_of_the_harvest
					}
					NOT = { location = { religion = maiden_of_the_harvest } }
					NOT = { location = { has_province_modifier = secret_maiden_of_the_harvest_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_bearded_priests_reformed
					}
					NOT = { location = { religion = bearded_priests_reformed } }
					NOT = { location = { has_province_modifier = secret_bearded_priests_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_bearded_priests
					}
					NOT = { location = { religion = bearded_priests } }
					NOT = { location = { has_province_modifier = secret_bearded_priests_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_boashi_reformed
					}
					NOT = { location = { religion = boashi_reformed } }
					NOT = { location = { has_province_modifier = secret_boashi_reformed_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_boashi
					}
					NOT = { location = { religion = boashi } }
					NOT = { location = { has_province_modifier = secret_boashi_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_trios
					}
					NOT = { location = { religion = trios } }
					NOT = { location = { has_province_modifier = secret_trios_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_valyrian
					}
					NOT = { location = { religion = valyrian } }
					NOT = { location = { has_province_modifier = secret_valyrian_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_the_dragon_gods
					}
					NOT = { location = { religion = the_dragon_gods } }
					NOT = { location = { has_province_modifier = secret_the_dragon_gods_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_the_plundering_dragon
					}
					NOT = { location = { religion = the_plundering_dragon } }
					NOT = { location = { has_province_modifier = secret_the_plundering_dragon_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_the_weeping_lady
					}
					NOT = { location = { religion = the_weeping_lady } }
					NOT = { location = { has_province_modifier = secret_the_weeping_lady_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_lady_of_the_rocks
					}
					NOT = { location = { religion = lady_of_the_rocks } }
					NOT = { location = { has_province_modifier = secret_lady_of_the_rocks_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_black_flag
					}
					NOT = { location = { religion = black_flag } }
					NOT = { location = { has_province_modifier = secret_black_flag_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_dothraki
					}
					NOT = { location = { religion = dothraki } }
					NOT = { location = { has_province_modifier = secret_dothraki_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_rhoynar
					}
					NOT = { location = { religion = rhoynar } }
					NOT = { location = { has_province_modifier = secret_rhoynar_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_harpy
					}
					NOT = { location = { religion = harpy } }
					NOT = { location = { has_province_modifier = secret_harpy_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_yiti_gods
					}
					NOT = { location = { religion = yiti_gods } }
					NOT = { location = { has_province_modifier = secret_yiti_gods_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_lion_night
					}
					NOT = { location = { religion = lion_night } }
					NOT = { location = { has_province_modifier = secret_lion_night_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_starry_wisdom
					}
					NOT = { location = { religion = starry_wisdom } }
					NOT = { location = { has_province_modifier = secret_starry_wisdom_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_old_ones
					}
					NOT = { location = { religion = old_ones } }
					NOT = { location = { has_province_modifier = secret_old_ones_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_shadowbinders
					}
					NOT = { location = { religion = shadowbinders } }
					NOT = { location = { has_province_modifier = secret_shadowbinders_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_gods_bone_mountains
					}
					NOT = { location = { religion = gods_bone_mountains } }
					NOT = { location = { has_province_modifier = secret_gods_bone_mountains_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_gods_nghai
					}
					NOT = { location = { religion = gods_nghai } }
					NOT = { location = { has_province_modifier = secret_gods_nghai_community } }
				}
				AND = {
					FROM = {
						society_member_of = secret_religious_society_stone_cow
					}
					NOT = { location = { religion = stone_cow } }
					NOT = { location = { has_province_modifier = secret_stone_cow_community } }
				}
			}
		}
		
		allow = {
			FROM = {
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				has_society_currency_medium_trigger = yes
			}
			custom_tooltip = {
				text = prepare_grounds_allow_tooltip
				hidden_trigger = {	
					location = {
						ROOT_FROM = { 
							NOT = { has_character_flag = preparing_grounds_in_@PREV }
						}
					}
				}
			}
		}
		
		effect = {
			location = {
				save_event_target_as = target_province
			}
			FROM = {
				society = {
					save_event_target_as = original_society
				}
				if = {
					limit = { 
						ai = no
					}
					detract_society_currency_medium_effect = yes
				}
				custom_tooltip = {
					text = secret_religions_prepare_grounds_effect_tooltip
					character_event = { id = MNM.3850 days = 2 }
				}
			}
			FROM = { 
				if = { 
					limit = {
						is_society_grandmaster = yes
					}
					increase_visibility_minor_effect = yes
				}
				if = {
					limit = {
						NOT = { is_society_grandmaster = yes }
					}
					increase_visibility_effect = yes
				}
				set_character_flag = preparing_grounds_in_@event_target:target_province
				character_event = { id = MNM.3849 days = 1200 }
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
		}
	}
}

#########################################################################################################
################ Secret society normal decisions
#########################################################################################################
decisions = {
	secret_religions_found_secret_religious_society = {
		only_playable = yes
		
		is_high_prio = yes
	
		potential = {
			has_secret_religion = yes
			secret_religious_cult = { # Has no members
				NOT = {
					any_society_member = { always = yes }
				}
			}
			NOT = {
				has_game_rule = {
					name = secret_cults
					value = none
				}
			}
		}
		
		allow = {
			is_adult = yes
			prestige = 250
			NOT = { is_in_society = yes }
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
		}
		
		effect = {
			#hidden_effect = { # To track the number of Founded Cults
			#	change_variable = { which = global_founded_cults value = 1 }
			#	if = {
			#		limit = {
			#			secret_religion = the_seven
			#		}
			#		change_variable = { which = global_the_seven_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = cathar
			#		}
			#		change_variable = { which = global_cathar_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = the_mother
			#		}
			#		change_variable = { which = global_the_mother_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = the_stranger
			#		}
			#		change_variable = { which = global_the_stranger_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = the_smith
			#		}
			#		change_variable = { which = global_the_smith_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = lady_of_the_waves
			#		}
			#		change_variable = { which = global_lady_of_the_waves_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = vulture_god
			#		}
			#		change_variable = { which = global_vulture_god_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = old_gods
			#		}
			#		change_variable = { which = global_old_gods_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = old_gods_beyond
			#		}
			#		change_variable = { which = global_old_gods_beyond_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = old_gods_beyond_white
			#		}
			#		change_variable = { which = global_old_gods_beyond_white_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = drowned_god
			#		}
			#		change_variable = { which = global_drowned_god_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = storm_god
			#		}
			#		change_variable = { which = global_storm_god_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = rhllor
			#		}
			#		change_variable = { which = global_rhllor_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = moonsingers
			#		}
			#		change_variable = { which = global_moonsingers_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = faceless_men
			#		}
			#		change_variable = { which = global_faceless_men_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = maiden_of_the_harvest
			#		}
			#		change_variable = { which = global_maiden_of_the_harvest_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = bearded_priests_reformed
			#		}
			#		change_variable = { which = global_bearded_priests_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = bearded_priests
			#		}
			#		change_variable = { which = global_bearded_priests_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = boashi_reformed
			#		}
			#		change_variable = { which = global_boashi_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = boashi
			#		}
			#		change_variable = { which = global_boashi_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = trios
			#		}
			#		change_variable = { which = global_trios_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = valyrian
			#		}
			#		change_variable = { which = global_valyrian_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = the_weeping_lady
			#		}
			#		change_variable = { which = global_the_weeping_lady_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = black_flag
			#		}
			#		change_variable = { which = global_black_flag_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = lady_of_the_rocks
			#		}
			#		change_variable = { which = global_lady_of_the_rocks_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = dothraki
			#		}
			#		change_variable = { which = global_dothraki_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = rhoynar
			#		}
			#		change_variable = { which = global_rhoynar_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = harpy
			#		}
			#		change_variable = { which = global_harpy_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = yiti_gods
			#		}
			#		change_variable = { which = global_yiti_gods_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = lion_night
			#		}
			#		change_variable = { which = global_bon_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = old_ones
			#		}
			#		change_variable = { which = global_old_ones_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = shadowbinders
			#		}
			#		change_variable = { which = global_shadowbinders_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = gods_bone_mountains
			#		}
			#		change_variable = { which = global_gods_bone_mountains_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = gods_nghai
			#		}
			#		change_variable = { which = global_gods_nghai_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = stone_cow
			#		}
			#		change_variable = { which = global_stone_cow_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = norse_pagan
			#		}
			#		change_variable = { which = global_norse_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = baltic_pagan_reformed
			#		}
			#		change_variable = { which = global_baltic_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = baltic_pagan
			#		}
			#		change_variable = { which = global_baltic_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = finnish_pagan_reformed
			#		}
			#		change_variable = { which = global_finnish_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = finnish_pagan
			#		}
			#		change_variable = { which = global_finnish_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = slavic_pagan_reformed
			#		}
			#		change_variable = { which = global_slavic_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = slavic_pagan
			#		}
			#		change_variable = { which = global_slavic_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = tengri_pagan_reformed
			#		}
			#		change_variable = { which = global_tengri_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = tengri_pagan
			#		}
			#		change_variable = { which = global_tengri_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = west_african_pagan_reformed
			#		}
			#		change_variable = { which = global_west_african_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = west_african_pagan
			#		}
			#		change_variable = { which = global_west_african_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zun_pagan_reformed
			#		}
			#		change_variable = { which = global_zun_pagan_reformed_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = zun_pagan
			#		}
			#		change_variable = { which = global_zun_pagan_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = the_dragon_gods
			#		}
			#		change_variable = { which = global_the_dragon_gods_founded_cults value = 1 }
			#	}
			#	if = {
			#		limit = {
			#			secret_religion = the_plundering_dragon
			#		}
			#		change_variable = { which = global_the_plundering_dragon_founded_cults value = 1 }
			#	}
			#}
			character_event = { id = MNM.3950 }
			prestige = -250
			join_society = secret_religious_cult
			set_society_grandmaster = yes # Set character as Grand Master
			#if = { 
			#	limit = { 
			#		NOR = { 
			#			secret_religion = starry_wisdom
			#			secret_religion = starry_wisdom_reformed
			#		}
			#	}
			#	custom_tooltip = { text = tooltip_add_massive_society_currency } 
			#}
			#if = { 
			#	limit = { 
			#		OR = { 
			#			secret_religion = starry_wisdom
			#			secret_religion = starry_wisdom_reformed
			#		}
			#	}
			#	custom_tooltip = { text = tooltip_add_massive_hellenic_society_currency } 
			#}
			hidden_tooltip = { add_society_currency_massive_effect = yes } # Give the Grand Master a start-up capital to induct members
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0.1
			
			modifier = {
				factor = 0.03 # Slow down
			}
			modifier = {
				factor = 2
				OR = {
					top_liege = { # If the characters top liege is a player
						ai = no
					}
					top_liege = {
						any_realm_lord = { # If there is a player vassal in the same realm that is not secretly religious
							ai = no
							independent = no
							has_secret_religion_trait_trigger = no
						}
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = {
					trait = zealous
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					trait = content
					trait = trusting
					trait = shy
				}
			}
			modifier = { # Do not create more than one society per realm
				factor = 0
				any_realm_lord = {
					society_member_of = secret_religious_cult
				}
			}
			modifier = {
				factor = 0
				any_player = {
					shares_prevs_secret_religion_trigger = yes
				}
			}
		}
	}
	
	secret_religions_falsely_confess_faith = {
	
		is_high_prio = yes
	
		only_playable = yes
		
		potential = {
			OR = {
				liege = {
					NOT = {
						religion = ROOT
					}
				}
				top_liege = {
					NOT = {
						religion = ROOT
					}
				}
			}
			NOT = { controls_religion = yes }
		}
		allow = {
			piety = 100
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
		}
		effect = {
			character_event = { id = MNM.3951 days = 1 }
			if = {
				limit = { has_secret_religion = yes }
				secret_religion_scope = { save_event_target_as = actual_religion }
				piety = -50
				custom_tooltip = { text = confess_faith_already_has_secret_rel_tt }
			}
			else = {
				religion_scope = { save_event_target_as = actual_religion }
				piety = -100
				hidden_effect = {
					set_secret_religion = event_target:actual_religion # This has to actually happen after the religion is set
				}
			}
			custom_tooltip = {
				text = confess_faith_decision_tooltip
				hidden_effect = {
					if = {
						limit = {
							liege = {
								NOT = {
									religion = ROOT
								}
							}
						}
						liege = {
							religion_scope = { save_event_target_as = false_religion }
						}
					}
					else_if = {
						limit = {
							top_liege = {
								NOT = {
									religion = ROOT
								}
							}
						}
						top_liege = {
							religion_scope = { save_event_target_as = false_religion }
						}
					}
					ROOT = {
						religion = event_target:false_religion
						set_secret_religion = event_target:actual_religion
					}
				}
			}
			custom_tooltip = {
				text = confess_faith_courtiers_decision_tooltip
				hidden_effect = {
					any_courtier = {
						limit = {
							religion = event_target:actual_religion
							employer = { character = ROOT }
							NOT = { trait = zealous }
							NOT = { has_secret_religion = yes }
						}
						random = {
							chance = 50
							modifier = {
								factor = 1.5
								is_close_relative = yes
							}
							modifier = {
								factor = 1.2
								trait = cynical
							}
							religion = event_target:false_religion
							set_secret_religion = event_target:actual_religion
						}
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

title_decisions = {
	secretly_convert_to_province_religion = {
		filter = owned
		ai_target_filter = self
		
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { controls_religion = yes }
		}
		
		potential = {
			tier = COUNT
			NOT = { location = { religion = FROM } }
			NOT = { location = { religion = { target_type = secret target = FROM } } }
			owner = { character = FROM }
			location = {
				dlc_religion_check_trigger = yes
			}
		}
		
		allow = {
			FROM = { 
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			location = { save_event_target_as = location }
			FROM = {
				set_secret_religion = event_target:location
				piety = -250
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_the_seven_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = the_seven }
			NOT = { religion = the_seven }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = the_seven }
			}
			OR = {
				is_holy_site = the_seven
				any_de_jure_vassal_title = {
					is_holy_site = the_seven
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = the_seven
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_the_seven_gods_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = the_seven_gods }
			NOT = { religion = the_seven_gods }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = the_seven_gods }
			}
			OR = {
				is_holy_site = the_seven
				any_de_jure_vassal_title = {
					is_holy_site = the_seven_gods
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = the_seven_gods
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_the_mother_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = the_mother }
			NOT = { religion = the_mother }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = the_mother }
			}
			OR = {
				is_holy_site = the_seven
				any_de_jure_vassal_title = {
					is_holy_site = the_mother
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = the_mother
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_the_stranger_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = the_stranger }
			NOT = { religion = the_stranger }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = the_stranger }
			}
			OR = {
				is_holy_site = the_seven
				any_de_jure_vassal_title = {
					is_holy_site = the_stranger
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = the_stranger
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_the_smith_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = the_smith }
			NOT = { religion = the_smith }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = the_smith }
			}
			OR = {
				is_holy_site = the_seven
				any_de_jure_vassal_title = {
					is_holy_site = the_smith
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = the_smith
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_lady_of_the_waves_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = lady_of_the_waves }
			NOT = { religion = lady_of_the_waves }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = lady_of_the_waves }
			}
			OR = {
				is_holy_site = lady_of_the_waves
				any_de_jure_vassal_title = {
					is_holy_site = lady_of_the_waves
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = lady_of_the_waves
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_vulture_god_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = vulture_god }
			NOT = { religion = vulture_god }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = vulture_god }
			}
			OR = {
				is_holy_site = vulture_god
				any_de_jure_vassal_title = {
					is_holy_site = vulture_god
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = vulture_god
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_old_gods_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = old_gods }
			NOT = { religion = old_gods }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = old_gods }
			}
			OR = {
				is_holy_site = old_gods
				any_de_jure_vassal_title = {
					is_holy_site = old_gods
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = old_gods
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_old_gods_beyond_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = old_gods_beyond }
			NOT = { religion = old_gods_beyond }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = old_gods_beyond }
			}
			OR = {
				is_holy_site = old_gods_beyond
				any_de_jure_vassal_title = {
					is_holy_site = old_gods_beyond
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = old_gods_beyond
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_old_gods_beyond_white_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = old_gods_beyond_white }
			NOT = { religion = old_gods_beyond_white }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = old_gods_beyond_white }
			}
			OR = {
				is_holy_site = old_gods_beyond_white
				any_de_jure_vassal_title = {
					is_holy_site = old_gods_beyond_white
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = old_gods_beyond_white
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_rhllor_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = rhllor }
			NOT = { religion = rhllor }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			tier = COUNT
			NOT = {
				location = { religion = rhllor }
			}
			OR = {
				is_holy_site = rhllor
				any_de_jure_vassal_title = {
					is_holy_site = rhllor
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = rhllor
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_moonsingers_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = moonsingers }
			NOT = { religion = moonsingers }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = moonsingers }
			}
			OR = {
				is_holy_site = moonsingers
				any_de_jure_vassal_title = {
					is_holy_site = moonsingers
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = moonsingers
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_faceless_men_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = faceless_men }
			NOT = { religion = faceless_men }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = faceless_men }
			}
			OR = {
				is_holy_site = faceless_men
				any_de_jure_vassal_title = {
					is_holy_site = faceless_men
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = faceless_men
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_maiden_of_the_harvest_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = maiden_of_the_harvest }
			NOT = { religion = maiden_of_the_harvest }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = maiden_of_the_harvest }
			}
			OR = {
				is_holy_site = maiden_of_the_harvest
				any_de_jure_vassal_title = {
					is_holy_site = maiden_of_the_harvest
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = maiden_of_the_harvest
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_bearded_priests_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			has_global_flag = bearded_priest_reformation
			NOT = { secret_religion = bearded_priests_reformed }
			NOT = { religion = bearded_priests_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = bearded_priests_reformed }
			}
			OR = {
				is_holy_site = bearded_priests_reformed
				any_de_jure_vassal_title = {
					is_holy_site = bearded_priests_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = bearded_priests_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_bearded_priests_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = bearded_priests }
			NOT = { religion = bearded_priests }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = bearded_priests }
			}
			OR = {
				is_holy_site = bearded_priests
				any_de_jure_vassal_title = {
					is_holy_site = bearded_priests
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = bearded_priests
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_boashi_reformed_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			has_global_flag = boashi_reformation
			NOT = { secret_religion = boashi_reformed }
			NOT = { religion = boashi_reformed }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = boashi_reformed }
			}
			OR = {
				is_holy_site = boashi_reformed
				any_de_jure_vassal_title = {
					is_holy_site = boashi_reformed
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = boashi_reformed
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_boashi_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = boashi }
			NOT = { religion = boashi }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = boashi }
			}
			OR = {
				is_holy_site = boashi
				any_de_jure_vassal_title = {
					is_holy_site = boashi
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = boashi
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_trios_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = trios }
			NOT = { religion = trios }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Sword of Islam"
			tier = COUNT
			NOT = {
				location = { religion = trios }
			}
			OR = {
				is_holy_site = trios
				any_de_jure_vassal_title = {
					is_holy_site = trios
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = trios
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_valyrian_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = valyrian }
			NOT = { religion = valyrian }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Sons of Abraham"
			tier = COUNT
			NOT = {
				location = { religion = valyrian }
			}
			OR = {
				is_holy_site = valyrian
				any_de_jure_vassal_title = {
					is_holy_site = valyrian
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = valyrian
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_the_dragon_gods_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = the_dragon_gods }
			NOT = { religion = the_dragon_gods }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Sons of Abraham"
			tier = COUNT
			NOT = {
				location = { religion = the_dragon_gods }
			}
			OR = {
				is_holy_site = the_dragon_gods
				any_de_jure_vassal_title = {
					is_holy_site = the_dragon_gods
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = the_dragon_gods
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_the_plundering_dragon_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = the_plundering_dragon }
			NOT = { religion = the_plundering_dragon }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Sons of Abraham"
			tier = COUNT
			NOT = {
				location = { religion = the_plundering_dragon }
			}
			OR = {
				is_holy_site = the_plundering_dragon
				any_de_jure_vassal_title = {
					is_holy_site = the_plundering_dragon
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = the_plundering_dragon
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_the_weeping_lady_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = the_weeping_lady }
			NOT = { religion = the_weeping_lady }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Sons of Abraham"
			tier = COUNT
			NOT = {
				location = { religion = the_weeping_lady }
			}
			OR = {
				is_holy_site = the_weeping_lady
				any_de_jure_vassal_title = {
					is_holy_site = the_weeping_lady
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = the_weeping_lady
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_lady_of_the_rocks_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = lady_of_the_rocks }
			NOT = { religion = lady_of_the_rocks }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Sons of Abraham"
			tier = COUNT
			NOT = {
				location = { religion = lady_of_the_rocks }
			}
			OR = {
				is_holy_site = lady_of_the_rocks
				any_de_jure_vassal_title = {
					is_holy_site = lady_of_the_rocks
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = lady_of_the_rocks
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_black_flag_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = black_flag }
			NOT = { religion = black_flag }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Sons of Abraham"
			tier = COUNT
			NOT = {
				location = { religion = black_flag }
			}
			OR = {
				is_holy_site = black_flag
				any_de_jure_vassal_title = {
					is_holy_site = black_flag
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = black_flag
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_dothraki_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = dothraki }
			NOT = { religion = dothraki }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Old Gods"
			tier = COUNT
			NOT = {
				location = { religion = dothraki }
			}
			OR = {
				is_holy_site = dothraki
				any_de_jure_vassal_title = {
					is_holy_site = dothraki
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = dothraki
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_rhoynar_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = rhoynar }
			NOT = { religion = rhoynar }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Old Gods"
			tier = COUNT
			NOT = {
				location = { religion = rhoynar }
			}
			OR = {
				is_holy_site = rhoynar
				any_de_jure_vassal_title = {
					is_holy_site = rhoynar
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = rhoynar
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_harpy_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = harpy }
			NOT = { religion = harpy }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Old Gods"
			tier = COUNT
			NOT = {
				location = { religion = harpy }
			}
			OR = {
				is_holy_site = harpy
				any_de_jure_vassal_title = {
					is_holy_site = harpy
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = harpy
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_yiti_gods_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = yiti_gods }
			NOT = { religion = yiti_gods }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Old Gods"
			tier = COUNT
			NOT = {
				location = { religion = yiti_gods }
			}
			OR = {
				is_holy_site = yiti_gods
				any_de_jure_vassal_title = {
					is_holy_site = yiti_gods
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = yiti_gods
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_lion_night_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = lion_night }
			NOT = { religion = lion_night }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Old Gods"
			tier = COUNT
			NOT = {
				location = { religion = lion_night }
			}
			OR = {
				is_holy_site = lion_night
				any_de_jure_vassal_title = {
					is_holy_site = lion_night
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = lion_night
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_starry_wisdom_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = starry_wisdom }
			NOT = { religion = starry_wisdom }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Old Gods"
			tier = COUNT
			NOT = {
				location = { religion = starry_wisdom }
			}
			OR = {
				is_holy_site = starry_wisdom
				any_de_jure_vassal_title = {
					is_holy_site = starry_wisdom
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = starry_wisdom
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_old_ones_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = old_ones }
			NOT = { religion = old_ones }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "The Old Gods"
			tier = COUNT
			NOT = {
				location = { religion = old_ones }
			}
			OR = {
				is_holy_site = old_ones
				any_de_jure_vassal_title = {
					is_holy_site = old_ones
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = old_ones
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_shadowbinders_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = shadowbinders }
			NOT = { religion = shadowbinders }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Rajas of India"
			tier = COUNT
			NOT = {
				location = { religion = shadowbinders }
			}
			OR = {
				is_holy_site = shadowbinders
				any_de_jure_vassal_title = {
					is_holy_site = shadowbinders
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = shadowbinders
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	secretly_convert_to_gods_bone_mountains_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = gods_bone_mountains }
			NOT = { religion = gods_bone_mountains }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			has_dlc = "Rajas of India"
			tier = COUNT
			NOT = {
				location = { religion = gods_bone_mountains }
			}
			OR = {
				is_holy_site = gods_bone_mountains
				any_de_jure_vassal_title = {
					is_holy_site = gods_bone_mountains
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = gods_bone_mountains
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}

	secretly_convert_to_gods_nghai_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = gods_nghai }
			NOT = { religion = gods_nghai }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
				has_dlc = "Jade Dragon"
			}
			tier = COUNT
			NOT = {
				location = { religion = norse_pagan }
			}
			OR = {
				is_holy_site = bon
				any_de_jure_vassal_title = {
					is_holy_site = bon
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = gods_nghai
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}

	secretly_convert_to_stone_cow_holy_site = {
		filter = owned
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { secret_religion = stone_cow }
			NOT = { religion = stone_cow }
			NOT = { controls_religion = yes }
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		potential = {
			OR = {
				has_dlc = "The Old Gods"
				has_dlc = "Holy Fury"
				has_dlc = "Jade Dragon"
			}
			tier = COUNT
			NOT = {
				location = { religion = stone_cow }
			}
			OR = {
				is_holy_site = stone_cow
				any_de_jure_vassal_title = {
					is_holy_site = stone_cow
				}
			}
			OR = {
				holder_scope = {
					character = FROM
				}
				AND = {
					tier = BARON
					holder_scope = {
						liege = {
							character = FROM
						}
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = {
				piety = -250
				set_secret_religion = stone_cow
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

targeted_decisions = {
	secretly_convert_to_close_relations_religion = {
		#filter
		ai_target_filter = self
	
		only_playable = yes
		
		from_potential = {
			ai = no
			NOT = { trait = incapable }
			NOT = { controls_religion = yes }
		}
		
		potential = {
			OR = {
				AND = {
					spouse = {
						character = FROM
					}
					dlc_religion_check_trigger = yes
					NOR = { 
						religion = FROM
						religion = { target_type = secret target = FROM }
					}
				}
				AND = {
					consort = {
						character = FROM
					}
					dlc_religion_check_trigger = yes
					NOR = { 
						religion = FROM
						religion = { target_type = secret target = FROM }
					}
				}
				AND = {
					dlc_religion_check_trigger = yes
					is_friend = FROM
					NOR = { 
						religion = FROM
						religion = { target_type = secret target = FROM }
					}
				}
			}
		}
		
		allow = {
			FROM = {
				piety = 250
				prisoner = no
				NOT = { trait = incapable }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { society_member_of = secret_religious_cult }
			}
		}
		
		effect = {
			FROM = { set_secret_religion = { target_type = public target = PREV } }
			FROM = { piety = -250 }
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}